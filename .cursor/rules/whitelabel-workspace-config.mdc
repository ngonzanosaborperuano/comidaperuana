---
description: ConfiguraciÃ³n principal del workspace para Whitelabel App con Clean Architecture y BLoC
globs:
alwaysApply: true
---

# Whitelabel App - Workspace Configuration

## ğŸ¯ Overview

Este workspace estÃ¡ configurado para desarrollo Flutter con **Clean Architecture**, **BLoC/Cubit**, **fpdart** y **mejores prÃ¡cticas de la industria**.

---

## ğŸ“š Sistema de DocumentaciÃ³n

### ğŸ“– DocumentaciÃ³n Obligatoria
- **ANTES de cualquier implementaciÃ³n**: Leer `docs/README.md`
- **Consultar documentaciÃ³n especÃ­fica** segÃºn el tipo de componente
- **Actualizar documentaciÃ³n** despuÃ©s de implementar

### ğŸ—‚ï¸ Estructura de DocumentaciÃ³n
```
docs/
â”œâ”€â”€ README.md                     # ğŸ“– Ãndice principal
â”œâ”€â”€ bloc_data_flow.md            # ğŸ”„ Flujo de datos BLoC
â”œâ”€â”€ bloc_good_practices.md       # âœ… Mejores prÃ¡cticas BLoC
â”œâ”€â”€ error_handling_flow.md       # âš ï¸ Manejo de errores
â”œâ”€â”€ feature_architecture.md     # ğŸ—ï¸ Arquitectura por features
â”œâ”€â”€ folder_architecture.md      # ğŸ“ OrganizaciÃ³n de carpetas
â””â”€â”€ next_steps/                 # ğŸš€ Implementaciones futuras
```

---

## ğŸ—ï¸ Architecture Stack

### ğŸ”§ Core Technologies
- **State Management**: BLoC/Cubit con Equatable
- **Functional Programming**: fpdart (`Either<Failure, T>`, `Option<T>`)
- **Dependency Injection**: GetIt service locator
- **Navigation**: GoRouter con sistema de rutas propio
- **Logging**: Logger service centralizado
- **HTTP**: Dio con interceptors
- **Theme**: Sistema centralizado AppTheme

### ğŸš« TecnologÃ­as PROHIBIDAS
- **setState** - Usar BLoC/Cubit exclusivamente
- **Provider** - Este proyecto usa BLoC
- **print()** - Usar logger service
- **Colors.*** hardcodeados - Usar theme system
- **Asset paths directos** - Usar Assets class (cuando se implemente)

---

## ğŸ“‹ Workflow AutomÃ¡tico

### âœ… Pre-Implementation Checklist
```bash
1. [ ] Leer docs/README.md
2. [ ] Consultar arquitectura establecida
3. [ ] Verificar componentes existentes
4. [ ] Revisar shared/widgets/ para evitar duplicaciÃ³n
5. [ ] Confirmar patrones a seguir
```

### ğŸ”„ During Implementation
```bash
1. [ ] Usar BLoC/Cubit (NUNCA setState/Provider)
2. [ ] Implementar Either<Failure, T> para errores
3. [ ] Usar logger.d/i/w/e (NUNCA print)
4. [ ] Aplicar theme system (NUNCA Colors.*)
5. [ ] Registrar dependencies en injection.dart
6. [ ] Seguir Clean Architecture (Presentation â†’ Domain â†’ Data)
```

### ğŸ“ Post-Implementation
```bash
1. [ ] Actualizar docs/README.md si es necesario
2. [ ] Documentar inline cÃ³digo complejo
3. [ ] Verificar cumplimiento de flutter_code_basics
```

---

## ğŸ¨ Theme & UI Standards

### ğŸ¨ Theme System
```dart
// âœ… ALWAYS USE
Theme.of(context).colorScheme.primary
Theme.of(context).textTheme.bodyLarge
AppTheme.primaryColor

// âŒ NEVER USE
Colors.black
Colors.white
TextStyle(color: Colors.red)
```

### ğŸ§© Widget Creation Guidelines
```dart
// âœ… CORRECT: const constructors, theme usage
class CustomWidget extends StatelessWidget {
  final String text;
  
  const CustomWidget({super.key, required this.text});
  
  @override
  Widget build(BuildContext context) {
    return Container(
      color: Theme.of(context).colorScheme.surface,
      child: Text(
        text,
        style: Theme.of(context).textTheme.bodyLarge,
      ),
    );
  }
}
```

---

## ğŸ”„ BLoC/Cubit Patterns

### ğŸ“Š State Management Rules
```dart
// âœ… CORRECT: BLoC with Equatable and fpdart
class UserBloc extends Bloc<UserEvent, UserState> {
  final GetUserUseCase getUserUseCase;
  
  UserBloc({required this.getUserUseCase}) : super(const UserState.initial()) {
    on<GetUserEvent>(_onGetUser);
  }
  
  Future<void> _onGetUser(GetUserEvent event, Emitter<UserState> emit) async {
    emit(const UserState.loading());
    
    final result = await getUserUseCase(event.userId);
    
    result.fold(
      (failure) {
        logger.e('Failed to get user', error: failure);
        emit(UserState.error(failure));
      },
      (user) {
        logger.i('User loaded successfully: ${user.id}');
        emit(UserState.loaded(user));
      },
    );
  }
}

// âœ… CORRECT: States with Equatable
abstract class UserState extends Equatable {
  const UserState();
  
  @override
  List<Object> get props => [];
}
```

---

## ğŸ”§ Dependency Injection Pattern

### ğŸ’‰ GetIt Configuration
```dart
// En lib/core/injection.dart
Future<void> configureDependencies() async {
  // Data Layer - Singletons
  getIt.registerLazySingleton<UserRepository>(
    () => UserRepositoryImpl(remoteDataSource: getIt()),
  );
  
  // Domain Layer - Singletons
  getIt.registerLazySingleton<GetUserUseCase>(
    () => GetUserUseCase(repository: getIt()),
  );
  
  // Presentation Layer - Factories
  getIt.registerFactory<UserBloc>(
    () => UserBloc(getUserUseCase: getIt()),
  );
}
```

---

## ğŸ“ Logging Standards

### ğŸ” Logger Usage
```dart
// âœ… ALWAYS USE logger service
logger.d('Debug information');
logger.i('Information message');
logger.w('Warning message');
logger.e('Error occurred', error: e, stackTrace: StackTrace.current);

// âŒ NEVER USE print
print('Debug message'); // PROHIBITED
```

---

## ğŸš¨ Error Handling

### âš ï¸ fpdart Error Management
```dart
// âœ… CORRECT: Repository with Either
abstract class UserRepository {
  Future<Either<Failure, User>> getUser(String id);
}

// âœ… CORRECT: Failure hierarchy
abstract class Failure extends Equatable {
  final String message;
  const Failure(this.message);
  
  @override
  List<Object> get props => [message];
}

class ServerFailure extends Failure {
  const ServerFailure(String message) : super(message);
}
```

---

## ğŸ¯ Code Quality Rules

### ğŸ“ Standards
- **Line length**: MÃ¡ximo 80 caracteres
- **Function size**: MÃ¡ximo 30 lÃ­neas
- **SOLID principles**: Aplicar en todas las capas
- **Naming**: camelCase para variables, PascalCase para classes
- **Documentation**: JSDoc para public APIs

### ğŸ” Performance Guidelines
- Usar `const` constructors
- Implementar `ListView.builder` para listas grandes
- Aplicar `BlocBuilder` con `buildWhen` para rebuilds selectivos
- Usar `precacheImage` para imÃ¡genes crÃ­ticas

---

## ğŸ“± Platform Configuration

### ğŸ”§ Development Environment
- **Flutter Version**: Latest stable
- **Dart Version**: Latest stable
- **IDE**: VS Code / Android Studio con extensiones Flutter
- **Linting**: flutter_lints + custom rules

### ğŸ“¦ Core Dependencies
```yaml
dependencies:
  flutter_bloc: ^8.x.x
  equatable: ^2.x.x
  fpdart: ^1.x.x
  get_it: ^7.x.x
  go_router: ^13.x.x
  dio: ^5.x.x
  logger: ^2.x.x
```

---

## ğŸ”„ Development Cycle

### ğŸ¯ Feature Development Flow
1. **AnÃ¡lisis**: Leer requisitos y documentaciÃ³n
2. **DiseÃ±o**: Seguir Clean Architecture patterns
3. **ImplementaciÃ³n**: BLoC + fpdart + logging
5. **Documentation**: Actualizar docs si es necesario
6. **Review**: Verificar compliance con reglas

---

## ğŸ“ Support & Resources

### ğŸ”— Quick References
- **Internal Docs**: `docs/README.md`
- **BLoC Patterns**: `docs/bloc_good_practices.md`
- **Error Handling**: `docs/error_handling_flow.md`
- **Architecture**: `docs/feature_architecture.md`

### ğŸ“š External Links
- [Flutter Docs](https://docs.flutter.dev/)
- [BLoC Library](https://bloclibrary.dev/)
- [fpdart Package](https://pub.dev/packages/fpdart)
- [GetIt Package](https://pub.dev/packages/get_it)

---

## @todo

- [ ] Implementar Assets management system
- [ ] Crear shared widgets library
- [ ] Establecer CI/CD pipeline
- [ ] Implementar performance monitoring

---

**ConfiguraciÃ³n mantenida por**: Equipo Whitelabel App  
**Ãšltima actualizaciÃ³n**: Setup completo de workspace con Clean Architecture